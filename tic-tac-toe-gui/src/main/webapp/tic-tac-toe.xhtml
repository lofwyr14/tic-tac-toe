<?xml version="1.0" encoding="UTF-8"?>

<f:view xmlns:f="http://java.sun.com/jsf/core"
        xmlns:tc="http://myfaces.apache.org/tobago/component"
        xmlns:ui="http://java.sun.com/jsf/facelets">

  <tc:page id="page">

    <tc:style file="/tic-tac-toe.css"/>

    <tc:messages/>
    <tc:box label="Tic-Tac-Toe" >
      <f:facet name="bar">
        <tc:button image="fa-refresh" markup="primary" action="#{game.reset}"/>
      </f:facet>

      <tc:flowLayout textAlign="center">
        <tc:panel>
          <tc:style customClass="field"/>

          <ui:repeat value="#{game.field.cells}" var="cell" varStatus="v">
            <tc:button image="#{cell.owner.icon}" action="#{game.move(v.index)}" disabled="#{not cell.free || game.field.gameOver}">
              <tc:style customClass="#{cell.owner.cssClass}"/>
              <f:ajax render=":::page"/>
            </tc:button>
          </ui:repeat>

        </tc:panel>

      </tc:flowLayout>
    </tc:box>
  </tc:page>

</f:view>
